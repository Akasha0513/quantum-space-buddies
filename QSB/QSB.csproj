<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <LangVersion>9</LangVersion>
    <AssemblyTitle>Quantum Space Buddies</AssemblyTitle>
    <Company>Henry Pointer, Aleksander Waage, Ricardo Lopes</Company>
    <Product>Quantum Space Buddies</Product>
    <NeutralLanguage>en-GB</NeutralLanguage>
    <Description>Multiplayer mod for Outer Wilds</Description>
    <Copyright>Copyright © Henry Pointer, Aleksander Waage, Ricardo Lopes 2020-2021</Copyright>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
  </PropertyGroup>
  <PropertyGroup>
    <ProjectGuid>{1F00090A-C697-4C55-B401-192F3CFB9DC2}</ProjectGuid>
    <TargetFramework>net48</TargetFramework>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugType>full</DebugType>
    <Optimize>true</Optimize>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
  </PropertyGroup>
  <PropertyGroup>
    <RunPostBuildEvent>OnBuildSuccess</RunPostBuildEvent>
  </PropertyGroup>
  <PropertyGroup>
    <PostBuildEvent Condition="$(CopyToAssets) == 1">
:: copy dll to unity project
copy /y "$(TargetPath)" $(UnityAssetsDir)
:: copy quantumunet to unity project
copy /y "$(OwmlDir)\Mods\$(ProjectName)\QuantumUNET.dll" $(UnityAssetsDir)
:: copy game assembly to unity project
copy /y "$(GameDir)\OuterWilds_Data\Managed\Assembly-CSharp.dll" $(UnityAssetsDir)
copy /y "$(GameDir)\OuterWilds_Data\Managed\Assembly-CSharp-firstpass.dll" $(UnityAssetsDir)
copy /y "$(GameDir)\OuterWilds_Data\Managed\Unity.InputSystem.dll" $(UnityAssetsDir)
copy /y "$(GameDir)\OuterWilds_Data\Managed\EOS-SDK.dll" $(UnityAssetsDir)
copy /y "$(GameDir)\OuterWilds_Data\Managed\UniSense.dll" $(UnityAssetsDir)

:: copy owml files to unity project
copy /y "$(OwmlDir)\Autofac.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\Newtonsoft.Json.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\0Harmony.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\MonoMod.Utils.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\MonoMod.RuntimeDetour.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\Mono.Cecil.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\Mono.Cecil.Mdb.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\Mono.Cecil.Pdb.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\Mono.Cecil.Rocks.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\dnpatch.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\dnlib.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\Gameloop.Vdf.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\NAudio-Unity.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.Common.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModHelper.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModHelper.Assets.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModHelper.Events.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModHelper.Menus.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModHelper.Input.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModHelper.Interaction.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.Utils.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.Common.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.Logging.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.ModLoader.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.Patcher.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.GameFinder.dll" $(UnityAssetsDir)
copy /y "$(OwmlDir)\OWML.Abstractions.dll" $(UnityAssetsDir)
</PostBuildEvent>
  </PropertyGroup>
  <ItemGroup>
    <None Include="default-config.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
    <None Include="manifest.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
  </ItemGroup>
  <ItemGroup>
    <Reference Include="Assembly-CSharp_publicized">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\publicized_assemblies\Assembly-CSharp_publicized.dll</HintPath>
    </Reference>
    <Reference Include="Assembly-CSharp-firstpass">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\Assembly-CSharp-firstpass.dll</HintPath>
    </Reference>
    <Reference Include="netstandard">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\netstandard.dll</HintPath>
    </Reference>
    <Reference Include="Unity.InputSystem, Version=1.0.2.0, Culture=neutral, processorArchitecture=MSIL">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\Unity.InputSystem.dll</HintPath>
      <SpecificVersion>False</SpecificVersion>
    </Reference>
    <Reference Include="UnityEngine">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.AnimationModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.AnimationModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.AssetBundleModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.AssetBundleModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.AudioModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.AudioModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.CoreModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.CoreModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.IMGUIModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.IMGUIModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.InputLegacyModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.InputLegacyModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.InputModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.InputModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.Networking">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.Networking.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.ParticleSystemModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.ParticleSystemModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.PhysicsModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.PhysicsModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.TextCoreModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.TextCoreModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.TextRenderingModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.TextRenderingModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.UI">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.UI.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.UIModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.UIModule.dll</HintPath>
    </Reference>
    <Reference Include="UnityEngine.UNETModule">
      <HintPath>$(GameDir)\OuterWilds_Data\Managed\UnityEngine.UNETModule.dll</HintPath>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\QuantumUNET\QuantumUNET.csproj" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="lib\UnityEngine.Networking.dll" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="HarmonyX" Version="2.5.5" />
    <PackageReference Include="OWML" Version="2.0.0" />
  </ItemGroup>
  <ItemGroup>
    <None Update="AssetBundles\">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
</Project>